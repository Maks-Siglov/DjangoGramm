{% extends 'djangogramm/base.html' %}

{% block title %}Post {{ post.title }}{% endblock %}

{% block content %}
    <h2>{{ post.title }}</h2>

    {% if post.image.value %}
        <img src="{{ post.image.value.url }}" alt="{{ post.title }}">
      {% endif %}

    <p>{{ post.content }}</p>
    <p>Date: {{ post.creation_date }}</p>
    <p>Owner: <a href="{% url 'profile' post.owner.username%}">{{ post.owner.username }}</a></p>

      {% if post.tag %}
        <p>Tag: <span class="tag">{{ post.tag.name }}</span></p>
      {% endif %}

    <p>
        {{ post.likes.count }} <a href="{% url 'like_post' post.id %}">Like</a>
        {{ post.dislikes.count }} <a href="{% url 'dislike_post' post.id %}">Dislike</a>
    </p>

    <h3>Comments</h3>
    {% for comment in comments %}
        <p>{{ comment.owner.username }}</p>
        <p>{{ comment.content }}</p>
        <p>
        {{ comment.likes.count }} <a href="{% url 'like_comment' comment.id %}">Like</a>
        {{ comment.dislikes.count }} <a href="{% url 'dislike_comment' comment.id %}">Dislike</a>
    </p>
    {% endfor %}

    <h4>Add comment</h4>
    <form method="post">
        {% csrf_token %}
        {{ comment_form.as_p }}
        <button type="submit">Comment</button>
    </form>

<p><a href="{% url 'post_list' %}">Post list</a></p>
{% endblock %}