{% extends 'main/base.html' %}

{% load custom_filters %}

{% block title %}Post {{ post.title }}{% endblock %}

{% block content %}
    <h2>{{ post.title }}</h2>

    <p>
    {% if post.images.all %}
        {% for image in post.images.all %}
            <img src="{{ image.image.url }}" alt="Image" width="200" height="200">
        {% endfor %}
    {% endif %}
    </p>

    <p>{{ post.content }}</p>
    <p>Date: {{ post.creation_date }}</p>
    <p>Owner: <a href="{% url 'profile' post.owner.username%}">{{ post.owner.username }}</a></p>

    {% if post.tags %}
        Tag:
        {% for tag in post.tags.all %}
            <span class="tag">{{ tag.name }}</span>
        {% endfor %}
    {% endif %}

    <p>
        {{ Post|likes_count:post.id }} <a href="{% url 'like_post' post.id %}">Like</a>
        {{ Post|dislikes_count:post.id }} <a href="{% url 'dislike_post' post.id %}">Dislike</a>
    </p>

    <h3>Comments</h3>
    {% for comment in comments %}
        <p>
            <a href="{% url 'profile' comment.owner.username%}">{{ comment.owner.username }}</a>:
            {{ comment.content }}
        </p>
        <p>
        {{ Comment|likes_count:comment.id }} <a href="{% url 'like_comment' comment.id %}?referring_page={{ request.path }}">Like</a>
        {{ Comment|dislikes_count:comment.id  }} <a href="{% url 'dislike_comment' comment.id %}?referring_page={{ request.path }}">Dislike</a>
    </p>
    {% endfor %}

    <h4>Add comment</h4>
    <form method="post">
        {% csrf_token %}
        {{ comment_form.as_p }}
        <button type="submit">Comment</button>
    </form>

<p><a href="{% url 'post_list' %}">Post list</a></p>
{% endblock %}